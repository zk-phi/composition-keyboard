# Composition 0.1

![co0](images/co0.jpeg)

![co1](images/co1.jpeg)

Choc V2 スイッチを採用した一体型・直交配列 40% キーボードです。 Choc V2 由来の薄さと、強めにつけた丸みが特徴的な可愛めのデザインになっています。透明アクリルで作るとよく光ります。

![co2](images/co2.jpeg)

また自分のキーボードではお馴染みになっている、内部の空洞を廃した積層ケースを採用しており、アクリルにしてはしっかりした打鍵感を実現しています。今回はスイッチの性質上プレートレスの設計になっており、 PCB とケースの間の空間がまったくないので、他の作品よりもやや硬めの打鍵感になります。 PCB とケースの間にゴムワッシャなどの緩衝材を入れても問題なく使えることを確認しているので、柔らかい打鍵感が好きな場合はなんちゃってガスケットマウント化して使うのもアリかもしれないです。

# 注意

Choc V2 は「MX 互換スイッチと同じキーキャップをはめることができるが、 MX 互換スイッチよりかなり薄い」という特殊なスイッチです。

キーキャップの選択肢問題をクリアしつつキーボードを薄型化できる優秀なスイッチですが、いくつか注意点もあります。

## 全ての MX 互換キーキャップが使えるわけではない

キーキャップ側は Choc V2 を想定して設計されているわけではないので、一部噛み合わないものもあるようです。把握している範囲では、 GMK などの Cherry プロファイル、 RAMA の GRID キーキャップなどは難ありでした。

## トッププレートなし設計

トッププレートがキーキャップに干渉してしまうため、トッププレートなしの設計になっています。そのため、スイッチを半田付けする際の位置決めにコツが要ります。また基板を直接アクリル板に固定する都合、基板の歪みがキーボード全体の歪みに繋がりやすいです。

対策についても組み立てガイドの中で解説していますのでご確認ください。

## Pro Micro のレイアウトについて

このキーボードは Pro Micro を採用しつつ Choc V2 の薄さも活かすため、 Pro Micro 部分をケースの外に追い出す設計になっています（写真３枚目参照）。

無茶な使い方 (Pro Micro が外れかけた状態で金属製の机に置く、とか…) をするとショートの危険があるため、心配な方は

- あえてコンスルーを使わずに Pro Micro を直接半田付けして、ゆるまないようにする
- 絶縁テープ等をあらかじめ貼っておく

など各自工夫してお使いください（自分はあまり気にせず使っています）。

# 必要なもの

キット
- 基板
- トップフレーム 2mm x 1, 3mm x 1
- ミドルプレート (2mm)
- ボトムプレート上 (3mm)
- ボトムプレート下 (3mm)

予備部品
- ボトムプレート下 (2mm)

汎用部品
- キースイッチ, キーキャップ, ダイオード 1N4148w x41
- LED SK6812mini x56
- 2pin タクトスイッチ x1
- Pro Micro + ピンヘッダまたはコンスルー
- M2 ねじ 14mm x13, 6mm x7
- M2 ナット x20
- ゴムクッション x4 以上

カスタマイズに使えそうな部品 (任意)
- ゴムワッシャ

# 予備部品について

「ボトムプレート下」に 2mm のものを使ってさらに 1mm 薄くすることもできます。

打面を 1mm 下げ打鍵感を変化させられるほか、デザイン的にもミドルプレートを中心に上下対称となって綺麗に見えます。

ただし、 Pro Micro に取り付けたコンスルー（ピンヘッダ）の足がケースをはみ出してしまうため、足をカットするなどして、机に触れてしまうことがないようひと工夫する必要があります。

組み立てガイドではより無難な 3mm をデフォルトとしますが、興味のある方は自己責任にてチャンレンジしてみてください。

# 組み立て
## Pro Micro にファームウェアを書き込んでおく

https://github.com/zk-phi/qmk_firmware に私の使っているキーマップがアップロードされています。

```terminal
make composition:phi:avrdude
```

## 基板の歪みを矯正

このキーボードは基板を直接ケースにねじ止めして一体化させる設計になっているので、基板の歪みが激しいと、最終的に完成するキーボード全体も歪んでしまうことがあります。

そこで、半田付けを始める前に、基板を損傷しない程度に軽く歪みを矯正しておくことをおすすめします。

## 基板に各パーツを実装

![pcb](images/pcb.png)

### ダイオードを実装

ダイオードはコの字の印がカソードです。

表面実装部品は、ガイドの印から大きくはみ出して取り付けてしまうと「ボトムプレート上」と干渉してケースが組めなくなってしまいますので、なるべく丁寧に位置を合わせてください。

実装を終えたら、ファームウェアを書き込んだ Pro Micro をコンスルーで差し込み、スイッチの穴をショートすることでキー入力ができることを確認しておきましょう。

### LED を実装 (オプション)

LED はコの字の印が Vcc です。

LED の実装順は Pro Micro 側上段のバックライト (背面実装・赤) からスタートして Z 字に降りていき、下段まで行ったらアンダーグロー (表面実装・青) で折り返すように進みます。

![led](images/led.png)

ファームウェアを書き込んだ Pro Micro をコンスルーで差し込み、逐次動作確認しながら進めていくのがオススメです。

### スイッチを実装

最後にスイッチを実装します。このキーボードはプレートレスの設計になっているので、トッププレートを挟まずにスイッチを半田付けしてしまって ok です。

Choc V2 は位置決めがやや難しいため、次のような手順で実装するのがおすすめです

1. ざっくり角度を決めて、マステなどで仮止めする
2. 回路に影響ない fix ピン (一つだけ下側に生えているピン) を最初に半田付けする
3. マステを剥がしてまっすぐついているか確認する。曲がっていたら修正する
4. 位置が確定したら残りの２つのピンも半田付けする

Pro Micro の裏にくるスイッチは、足を切っておかないと Pro Micro に干渉してしまう場合があります (個体差あり)。適宜ニッパなどで処理してください。ニッパを使用する際は切ったピンが飛んで行ってケガをしたりすることのないよう注意してください。

### Pro Micro の仕上げ

Pro Micro がゆるんでしまうのが不安な方は、 Pro Micro を基板に半田付けします。

## 基板とボトムプレート上を合体

![bottom](images/bottom.png)

「ボトムプレート上」と基板を短い方のネジで連結します。

基板とボトムプレートの間にゴムワッシャなどの緩衝材を挟んで、なんちゃってガスケットマウントのようにするのもアリだと思います（問題なく使えました）。

## ケースを組み立て

![case](images/case.png)

下から

- ボトムプレート下
- 基板＋ボトムプレート上
- ミドルフレーム
- トップフレーム (3mm)
- トップフレーム (2mm)

の順に重ね、長い方のネジで連結します。

キーキャップをはめて、ゴムクッションを貼り付ければ完成です。ゴムクッションを増やした方が剛性感が得られますが、ケースにたわみが出た時にガタつきを起こしてしまいます。このキーボードは薄く、また基板がケースと一体になっておりたわみやすいので、私は四隅だけにつけて使用しています。
