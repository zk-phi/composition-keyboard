# Composition 0.1

(TODO: 組み立てたら、対応キーキャップ、スイッチを良い感じに半田付けする方法など検証してアップデートする)

![co0](images/co0.png)

![co1](images/co1.png)

Choc V2 スイッチを採用した一体型・直交配列 40% キーボードです。 Choc V2 由来の薄さと、強めにつけた丸みが特徴的な可愛めのデザインになっています。透明アクリルで作るとよく光ります。

また自分のキーボードではお馴染みになっている、内部の空洞を廃した積層ケースを採用しており、アクリルにしてはしっかりした打鍵感を実現しています。今回はスイッチの性質上プレートレスの設計になっており、 PCB とケースの間の空間がまったくないので、他の作品よりもやや硬めの打鍵感になります。

# 注意
## Choc V2 について

Choc V2 は「MX 互換スイッチと同じキーキャップをはめることができるが、 MX 互換スイッチよりかなり薄い」という特殊なスイッチなので、若干トラップがあります。

既知のものでは、

- キーキャップとの相性問題がある
  - Cherry プロファイル (GMK など)：底まで押すとキャップがスイッチに触れてしまい打鍵感が悪い
  - RAMA GRID キーキャップ：底まで押すとキャップがスイッチにぴったりはまってしまい戻ってこない

- スイッチを半田する際、位置決めにコツがいる

など。

未確認ですが、たとえばキーキャップによっては「基板から飛び出した部品の足に干渉する」といったこともありうるかもしれません。

今後も増えていくであろうキーキャップをすべて検証することはできないので、あらかじめ「組み合わせによっては工夫して使う必要が出てくるかもしれない」というつもりでチャレンジしてみてください。

## ProMicro のレイアウトについて

このキーボードは ProMicro を採用しつつ Choc V2 の薄さも活かすため、 ProMicro がむき出しの状態で使用する前提の設計になっています。

「ProMicro が飛び出した状態で金属製の机に置く」など使い方によってはショートの危険があるため、心配な方は

- あえてコンスルーを使わずに ProMicro を直接半田付けして、絶対ずれないようにする
- ピンヘッダの足を切って絶縁テープを貼っておく

など各自工夫して安全にお使いください（自分はあまり気にせず使っていますが、何かあると嫌なので念のため）。

# 必要なもの

キット
- 基板
- トップフレーム 2mm x 1, 3mm x 1
- ミドルプレート (2mm)
- ボトムプレート上 (3mm)
- ボトムプレート下 (2mm)

予備部品
- ボトムプレート下 (3mm)

汎用部品
- キースイッチ, キーキャップ, ダイオード 1N4148w x41
- LED SK6812mini x56
- 2pin タクトスイッチ x1
- ProMicro + ピンヘッダまたはコンスルー
- M2 ねじ 12mm x13, 6mm x7
- M2 ナット x20
- ゴムクッション x6 以上

# 組み立て
## Pro Micro にファームウェアを書き込んでおく

https://github.com/zk-phi/qmk_firmware に私の使っているキーマップをアップロードしておきます。

```terminal
make composition:phi:avrdude
```

## 基板に各パーツを実装

![pcb](images/pcb.png)

### ダイオードを実装

ダイオードはコの字の印がカソード、 LED はコの字の印が Vcc です。

表面実装部品は、ガイドの印から大きくはみ出して取り付けてしまうと「ボトムプレート上」と干渉してケースが組めなくなってしまいますので、なるべく丁寧に位置を合わせてください。

実装を終えたら、ファームウェアを書き込んだ ProMicro をコンスルーで差し込み、スイッチの穴をショートすることでキー入力ができることを確認しておきましょう。

### LED を実装 (オプション)

LED の実装順は Pro Micro 側上段のバックライト (背面実装・赤) からスタートして Z 字に降りていき、下段まで行ったらアンダーグロー (表面実装・青) で折り返すように進みます。

![led](images/led.png)

ファームウェアを書き込んだ ProMicro をコンスルーで差し込み、逐次動作確認しながら進めていくのがオススメです。

### スイッチを実装

最後にスイッチを実装します。このキーボードはプレートレスの設計になっているので、トッププレートを挟まずにスイッチを半田付けしてしまって ok です。

Choc V2 は位置決めがやや難しいため、次のような手順で実装するのがおすすめです

1. 回路に影響ない fix ピン (一つだけ下側に生えているピン) を最初に半田付けし、仮止めする
2. 水平になるように位置を調整して、残りのピンを半田付けする

ProMicro の裏にくるスイッチは、足を切っておかないと ProMicro に干渉してしまう場合があります (個体差あり)。必要に応じてニッパなどで処理してください。

### ProMicro を半田付け (オプション)

この基板はコンスルー対応になっていますが、上の注意の通り、気にされる方は直接基板に半田付けしてお使いください。

## 基板とボトムプレート上を合体

![bottom](images/bottom.png)

「ボトムプレート上」と基板を 6mm ネジで連結します。

## ケースを組み立て

![case](images/case.png)

下から

- ボトムプレート下
- 基板＋ボトムプレート上
- ミドルフレーム
- トップフレーム (3mm)
- トップフレーム (2mm)

の順に重ね、 12mm ネジで全て連結します。

キーキャップをはめてゴムクッションを貼り付ければ完成です。
